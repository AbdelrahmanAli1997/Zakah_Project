<div class="min-h-screen grid grid-cols-1 md:grid-cols-2">
  <div class="flex flex-col items-center justify-center p-6 sm:p-12 bg-slate-50">
    <div class="w-full max-w-md">
      <!-- Step 1: Email -->
      @if (step() === 'email') {
        <h1 class="text-3xl font-bold text-slate-800">هل نسيت كلمة المرور؟</h1>
        <p class="text-slate-500 mt-2 mb-6">
          أدخل بريدك الإلكتروني وسنرسل لك رمز إعادة التعيين
        </p>

        <input type="email" placeholder="example@email.com" 
               class="w-full py-2.5 px-4 border rounded-lg mb-2"
               [value]="email()" (input)="onEmailChange($event)">
        @if (emailError()) {
          <p class="text-red-600 text-sm mb-2">{{ emailError() }}</p>
        }

        <button (click)="sendOtp()" 
                [disabled]="isLoading()" 
                class="w-full py-3 bg-slate-800 text-white rounded-lg">
          {{ isLoading() ? 'جاري الإرسال...' : 'إرسال OTP' }}
        </button>
      }

      <!-- Step 2: OTP -->
      @if (step() === 'otp') {
        <h1 class="text-3xl font-bold text-slate-800">تأكيد البريد الإلكتروني</h1>
        <p class="text-slate-500 mt-2 mb-6">أدخل الرمز المرسل إلى بريدك الإلكتروني</p>

        <input type="text" placeholder="ادخل رمز التحقق" 
               class="w-full py-2.5 px-4 border rounded-lg mb-2"
               [value]="otp()" (input)="onOtpChange($event)">
        @if (otpError()) {
          <p class="text-red-600 text-sm mb-2">{{ otpError() }}</p>
        }

        <button (click)="verifyOtp()" 
                [disabled]="isLoading()" 
                class="w-full py-3 bg-slate-800 text-white rounded-lg">
          {{ isLoading() ? 'جارٍ التحقق...' : 'تحقق' }}
        </button>
      }

      <!-- Step 3: Reset Password -->
      @if (step() === 'reset') {
        <h1 class="text-3xl font-bold text-slate-800">إعادة تعيين كلمة المرور</h1>
        <p class="text-slate-500 mt-2 mb-6">أدخل كلمة المرور الجديدة</p>

        <input type="password" placeholder="كلمة المرور الجديدة" 
               class="w-full py-2.5 px-4 border rounded-lg mb-2"
               [value]="newPassword()" (input)="onPasswordChange($event)">

        <input type="password" placeholder="تأكيد كلمة المرور" 
               class="w-full py-2.5 px-4 border rounded-lg mb-2"
               [value]="confirmPassword()" (input)="onConfirmPasswordChange($event)">

        @if (passwordError()) {
          <p class="text-red-600 text-sm mb-2">{{ passwordError() }}</p>
        }

        <button (click)="resetPassword()" 
                [disabled]="isLoading()" 
                class="w-full py-3 bg-slate-800 text-white rounded-lg">
          {{ isLoading() ? 'جارٍ الإرسال...' : 'إعادة تعيين كلمة المرور' }}
        </button>
      }

       <button routerLink="/login"
                class="w-full py-1.5  text-green-700 rounded-lg">
         العودة الى تسجيل الدخول
        </button>
    </div>
  </div>

  <div
    class="hidden md:flex flex-col items-center justify-center p-12 bg-[linear-gradient(90deg,rgba(42,123,155,1)_0%,rgba(43,204,110,1)_37%,rgba(235,235,235,1)_100%)] text-white">
    <div class="max-w-md text-center">
      <img src="/imgs/LogoZakah.png" alt="ZakahCalc Logo" class="h-56 w-auto mx-auto mb-6">
      <h2 class="text-3xl font-bold tracking-tight">مرحباً بك في حاسبة الزكاة!</h2>
      <p class="mt-4 text-gray-500">انضم الآن لحساب زكاة سلس ودقيق. أدِ واجباتك بثقة وسهولة.</p>
    </div>
  </div>
</div>
